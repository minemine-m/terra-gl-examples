version: '3.8'

services:
  terra-gl-web:
    # 直接使用官方轻量级 Nginx 镜像，无需自己构建
    image: nginx:alpine
    container_name: terra-gl-web
    restart: always
    
    ports:
      # 宿主机端口:容器端口
      # 启动后访问 http://群晖IP:8880
      - "8880:80"
    
    volumes:
      # 核心：将群晖本地的 dist 文件夹直接挂载进去
      - ./dist:/usr/share/nginx/html:ro
      
      # 核心：挂载 nginx 配置文件以支持 Vue Router 的 History 模式
      - ./nginx.conf:/etc/nginx/conf.d/default.conf:ro
